<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/mathquiz.css">
    <link rel="stylesheet" href="./css/showhide.css">
    <script src="./js/mathQuiz.js" defer></script>
    <script src="./js/showhide.js" defer></script>
    <title>Math Quiz</title>
</head>
<body>

<div class="converter-container">
    <header>
        <a href="./index.html"><span class="homeColor">Home</span></a>
        <a class="aboutBtn" href="#"><span class="homeColor">About</span></a>
        <h1 class="title">Math Quiz <sup>+ - x ÷</sup></h1>
    </header>
    <div id="mQMain">
        <hr>
        <div id="messageArea"></div>
        <div id="qArea">
            <p id="leftNum" class="mathText"></p>
            <p id="operator" class="mathText"></p>
            <p id="rightNum" class="mathText"></p>
            <p class="mathText">=</p>
        </div>  
        <div id="ansArea">
                <input id="usrIn" placeholder="answer">
                <button id="AnswerBtn">Enter</button>
        </div>
        <hr>
        <div id="scoreArea">
            <div class="questionNumText">
                <p>Question:</p>
                <p id="questionNumber">1</p>
            </div>
            <div class="scoreText">
                <p>Score:</p>
                <p id="score">0</p>
            </div>
        </div>
        <hr>
        <!-- <div id="rightWrongArea">
            <p>Right: <span>0</span></p>
            <p>Wrong: <span>0</span></p>
        </div> -->
     <div id="pts-area">
        <h2>Scoring</h2>
        <p>🥒 1 pt for addition 🥒</p>
        <p>🫒 2 pts for subtraction 🫒</p>
        <p>🍔 5 pts for multiplication 🍔</p>
        <p>🍕 10 pts for division 🍕</p>
     </div>
    </div>
</div>

<div class="aboutModal hidden">
    <button class="closeAboutModal">&times</button>
    <h1>Math Quiz</h1>
    <p>Math quiz is set up to randomly generate two numbers 
    along with a randomly generated operator so you never know
    what kind of question covering basic math you will get.
    This is adapted from a Java app I wrote. I still have to add
    an timing function, and a win state.
    </p><p>
    I made this with a combination of HTML, CSS and JS. 
    You can see the JavaScript by clicking the button below.
    </p>
</div><div class="aboutOverlay hidden"></div>

<div class="code">
    <button class="jsBtn" >See the Javascript.</button>
    <p><pre><code class="jsHidden hidden">
        <button class="closeJsModal">&times</button>
let score = 0;
let questionNum = 1;
let loopNum = 10;
let answer;
let usrIn = document.getElementById('usrIn');
let questionNumText = document.getElementById('questionNumber');
let scoreText = document.getElementById('score');
questionNumText.textContent = questionNum;
scoreText.textContent = score;

const bgColorChange = document.querySelector('.converter-container');
const messageArea = document.getElementById('messageArea');
const answerBtn = document.getElementById('AnswerBtn');

const questionConstructor = () => {
    opArr = ["+", "-", "x", "÷"];
    num1 = Math.floor(Math.random() * 10) + 1;
    num2 = Math.floor(Math.random() * 10) + 1;
    randOp = opArr[Math.floor(Math.random() * opArr.length)];

    document.getElementById('leftNum').textContent = num1;
    document.getElementById('operator').textContent = randOp;
    document.getElementById('rightNum').textContent = num2;
    if (randOp === '+') {
        answer = num1 + num2;
    }if (randOp === '-') {
        answer = num1 - num2;
    }if (randOp === 'x') {
        answer = num1 * num2;
    }if (randOp === '÷') {
        answer = num1 / num2;
        answer = answer.toFixed(2);
    }
    return answer
}

const clearField = () => {
    usrIn.value = null;
    usrIn.focus();
}

const messageTimeout = () => {
    setTimeout(() =>{
        messageArea.textContent = '';
    }, 1500);
}

const questionRight = () => {
    bgColorChange.style.boxShadow = '0 0 50px 20px rgba(51, 253, 0, 0.575)';
    setTimeout(() =>{
        bgColorChange.style.boxShadow = '0 0 0 0';
    }, 1200);
    messageArea.style.color = '#A5DD9B';
    messageArea.textContent = 'Correct!'
    clearField();
    messageTimeout();
}

const questionWrong = () => {
    bgColorChange.style.boxShadow = '0 0 50px 20px rgb(255, 46, 46)';
    setTimeout(() =>{
        bgColorChange.style.boxShadow = '0 0 0 0';
    }, 1200);
    messageArea.style.color = '#c1121f';
    messageArea.textContent = 'Incorrect!'
    clearField();
    messageTimeout();
}

const correctCheck = () => {
    if(randOp === '+' && Number(usrIn.value) === Number(answer)) {
        // console.log("This was a plus question")
        questionRight();
        score += 1;
        scoreText.textContent = score;
        // console.log(`The score is: ${score}`);
    }else if(randOp ==='-' && Number(usrIn.value) === Number(answer)) {
        // console.log("This was a Minus question")
        questionRight();
        score += 2;
        scoreText.textContent = score;
    }else if(randOp === 'x' && Number(usrIn.value) === Number(answer)) {
        // console.log("This was a multiplication question")
        questionRight();
        score += 5;
        scoreText.textContent = score;
    }else if(randOp === '÷' && Number(usrIn.value) === Number(answer)) {
        // console.log("This was a Division question")
        questionRight();
        score += 10;
        scoreText.textContent = score;
    }else if (Number(usrIn.value) !== Number(answer)) {
        questionWrong();
        score -= 1;
        scoreText.textContent = score;
    }
}

const nextQuestion = () => {
    questionNum += 1
    questionNumText.textContent = questionNum;
    questionConstructor();
    // console.log(answer);
}

answerBtn.addEventListener('click', () => {
    correctCheck();
    nextQuestion();
    // console.log(`${randOp}: ${typeof(randOp)}`)
});

usrIn.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        correctCheck();
        nextQuestion();
    }
});

questionConstructor();
// console.log(answer);
// console.log(`${randOp}: ${typeof(randOp)}`);
    </code></pre></p>
</div>
</body>
</html>